{"version":3,"file":"index.js","sources":["pages/ranking/index.vue","pages/ranking/index.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"ranking-container\">\n    <!-- 搜索栏 -->\n    <view class=\"search-section\">\n      <input \n        class=\"search-input\" \n        placeholder=\"搜索榜单或书籍\"\n        v-model=\"searchKeyword\"\n        @input=\"onSearch\"\n      />\n    </view>\n\n    <!-- 面包屑导航 -->\n    <view class=\"breadcrumb\" v-if=\"currentLevel > 1\">\n      <text class=\"breadcrumb-item\" @tap=\"goToLevel(1)\">{{ currentSite.name }}</text>\n      <text class=\"breadcrumb-separator\" v-if=\"currentLevel > 2\"> > </text>\n      <text class=\"breadcrumb-item\" v-if=\"currentLevel > 2\">{{ currentChannel.name }}</text>\n    </view>\n\n    <!-- 层级1: 分站选择 -->\n    <view class=\"level-container\" v-if=\"currentLevel === 1\">\n      <scroll-view class=\"site-scroll\" scroll-x=\"true\">\n        <view class=\"site-tabs\">\n          <view \n            class=\"site-tab\"\n            :class=\"{ active: selectedSite === site.id }\"\n            v-for=\"site in sites\" \n            :key=\"site.id\"\n            @tap=\"selectSite(site)\"\n          >\n            {{ site.name }}\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n\n    <!-- 层级2: 频道选择 -->\n    <view class=\"level-container\" v-if=\"currentLevel === 2 && currentSite.channels.length > 0\">\n      <scroll-view class=\"channel-scroll\" scroll-x=\"true\">\n        <view class=\"channel-tabs\">\n          <view \n            class=\"channel-tab\"\n            :class=\"{ active: selectedChannel === channel.id }\"\n            v-for=\"channel in currentSite.channels\" \n            :key=\"channel.id\"\n            @tap=\"selectChannel(channel)\"\n          >\n            {{ channel.name }}\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n\n    <!-- 层级3: 榜单列表 -->\n    <view class=\"level-container\" v-if=\"currentLevel === 3 || (currentLevel === 2 && currentSite.channels.length === 0)\">\n      <scroll-view class=\"ranking-list\" scroll-y=\"true\">\n        <view \n          class=\"ranking-card\"\n          v-for=\"ranking in rankingList\" \n          :key=\"ranking.id\"\n          @tap=\"goToRankingDetail(ranking)\"\n        >\n          <view class=\"ranking-title\">{{ ranking.name }}</view>\n          <view class=\"ranking-desc\">{{ ranking.desc }}</view>\n          <view class=\"ranking-stats\">\n            <text class=\"stat-item\">{{ ranking.bookCount }} 本书籍</text>\n            <text class=\"stat-item\">{{ ranking.updateTime }}</text>\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      searchKeyword: '',\n      currentLevel: 1, // 1: 分站选择, 2: 频道选择, 3: 榜单列表\n      selectedSite: '',\n      selectedChannel: '',\n      currentSite: {},\n      currentChannel: {},\n      sites: [],\n      rankingList: []\n    }\n  },\n  \n  onLoad() {\n    this.loadSites()\n  },\n  \n  methods: {\n    /**\n     * 加载分站数据\n     */\n    async loadSites() {\n      try {\n        // 从本地数据文件加载或从API获取\n        const urlData = require('@/data/url.json')\n        this.sites = Object.values(urlData.sites)\n      } catch (error) {\n        console.error('加载分站数据失败:', error)\n      }\n    },\n    \n    /**\n     * 选择分站\n     */\n    selectSite(site) {\n      this.selectedSite = site.id\n      this.currentSite = site\n      \n      if (site.channels && site.channels.length > 0) {\n        this.currentLevel = 2\n      } else {\n        this.currentLevel = 3\n        this.loadRankings(site.id)\n      }\n    },\n    \n    /**\n     * 选择频道\n     */\n    selectChannel(channel) {\n      this.selectedChannel = channel.id\n      this.currentChannel = channel\n      this.currentLevel = 3\n      this.loadRankings(this.selectedSite, channel.id)\n    },\n    \n    /**\n     * 返回指定层级\n     */\n    goToLevel(level) {\n      this.currentLevel = level\n      if (level === 1) {\n        this.selectedSite = ''\n        this.selectedChannel = ''\n        this.currentSite = {}\n        this.currentChannel = {}\n      }\n    },\n    \n    /**\n     * 加载榜单数据\n     */\n    async loadRankings(siteId, channelId = '') {\n      try {\n        // 这里应该调用API获取榜单数据\n        // const response = await this.$http.get('/api/rankings', { siteId, channelId })\n        // this.rankingList = response.data\n        \n        // 临时模拟数据\n        this.rankingList = [\n          {\n            id: '1',\n            name: '热门榜单',\n            desc: '当前最受欢迎的作品',\n            bookCount: 50,\n            updateTime: '2小时前更新'\n          },\n          {\n            id: '2', \n            name: '新书榜单',\n            desc: '最新发布的优质作品',\n            bookCount: 30,\n            updateTime: '1小时前更新'\n          }\n        ]\n      } catch (error) {\n        console.error('加载榜单数据失败:', error)\n      }\n    },\n    \n    /**\n     * 搜索功能\n     */\n    onSearch() {\n      // 实现搜索逻辑\n      console.log('搜索关键词:', this.searchKeyword)\n    },\n    \n    /**\n     * 跳转到榜单详情\n     */\n    goToRankingDetail(ranking) {\n      uni.navigateTo({\n        url: `/pages/ranking/detail?id=${ranking.id}`\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.ranking-container {\n  padding: 20rpx;\n}\n\n.search-section {\n  margin-bottom: 30rpx;\n}\n\n.search-input {\n  width: 100%;\n  height: 80rpx;\n  padding: 0 30rpx;\n  border: 2rpx solid #e0e0e0;\n  border-radius: 40rpx;\n  background-color: #f8f8f8;\n  font-size: 28rpx;\n}\n\n.breadcrumb {\n  margin-bottom: 20rpx;\n  font-size: 24rpx;\n  color: #666;\n}\n\n.breadcrumb-item {\n  color: #007aff;\n}\n\n.breadcrumb-separator {\n  margin: 0 10rpx;\n}\n\n.level-container {\n  margin-bottom: 30rpx;\n}\n\n.site-scroll, .channel-scroll {\n  white-space: nowrap;\n}\n\n.site-tabs, .channel-tabs {\n  display: flex;\n  padding: 10rpx 0;\n}\n\n.site-tab, .channel-tab {\n  flex-shrink: 0;\n  padding: 20rpx 40rpx;\n  margin-right: 20rpx;\n  background-color: #f0f0f0;\n  border-radius: 50rpx;\n  font-size: 28rpx;\n  color: #333;\n  \n  &.active {\n    background-color: #007aff;\n    color: white;\n  }\n}\n\n.ranking-list {\n  height: 1000rpx;\n}\n\n.ranking-card {\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n  background-color: white;\n  border-radius: 20rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\n}\n\n.ranking-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 10rpx;\n}\n\n.ranking-desc {\n  font-size: 26rpx;\n  color: #666;\n  margin-bottom: 15rpx;\n}\n\n.ranking-stats {\n  display: flex;\n  justify-content: space-between;\n  font-size: 24rpx;\n  color: #999;\n}\n</style> ","import MiniProgramPage from '/Users/guliyu/weixin-miniapp/JJClawler-frontend/JJClawler-frontend/pages/ranking/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA2EA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,eAAe;AAAA,MACf,cAAc;AAAA;AAAA,MACd,cAAc;AAAA,MACd,iBAAiB;AAAA,MACjB,aAAa,CAAE;AAAA,MACf,gBAAgB,CAAE;AAAA,MAClB,OAAO,CAAE;AAAA,MACT,aAAa,CAAC;AAAA,IAChB;AAAA,EACD;AAAA,EAED,SAAS;AACP,SAAK,UAAU;AAAA,EAChB;AAAA,EAED,SAAS;AAAA;AAAA;AAAA;AAAA,IAIP,MAAM,YAAY;AAChB,UAAI;AAEF,cAAM,UAAU,QAAQ,iBAAiB;AACzC,aAAK,QAAQ,OAAO,OAAO,QAAQ,KAAK;AAAA,MACxC,SAAO,OAAO;AACdA,sBAAAA,MAAc,MAAA,SAAA,kCAAA,aAAa,KAAK;AAAA,MAClC;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,WAAW,MAAM;AACf,WAAK,eAAe,KAAK;AACzB,WAAK,cAAc;AAEnB,UAAI,KAAK,YAAY,KAAK,SAAS,SAAS,GAAG;AAC7C,aAAK,eAAe;AAAA,aACf;AACL,aAAK,eAAe;AACpB,aAAK,aAAa,KAAK,EAAE;AAAA,MAC3B;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,cAAc,SAAS;AACrB,WAAK,kBAAkB,QAAQ;AAC/B,WAAK,iBAAiB;AACtB,WAAK,eAAe;AACpB,WAAK,aAAa,KAAK,cAAc,QAAQ,EAAE;AAAA,IAChD;AAAA;AAAA;AAAA;AAAA,IAKD,UAAU,OAAO;AACf,WAAK,eAAe;AACpB,UAAI,UAAU,GAAG;AACf,aAAK,eAAe;AACpB,aAAK,kBAAkB;AACvB,aAAK,cAAc,CAAC;AACpB,aAAK,iBAAiB,CAAC;AAAA,MACzB;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,MAAM,aAAa,QAAQ,YAAY,IAAI;AACzC,UAAI;AAMF,aAAK,cAAc;AAAA,UACjB;AAAA,YACE,IAAI;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,WAAW;AAAA,YACX,YAAY;AAAA,UACb;AAAA,UACD;AAAA,YACE,IAAI;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,WAAW;AAAA,YACX,YAAY;AAAA,UACd;AAAA,QACF;AAAA,MACA,SAAO,OAAO;AACdA,sBAAAA,MAAc,MAAA,SAAA,kCAAA,aAAa,KAAK;AAAA,MAClC;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,WAAW;AAETA,oBAAY,MAAA,MAAA,OAAA,kCAAA,UAAU,KAAK,aAAa;AAAA,IACzC;AAAA;AAAA;AAAA;AAAA,IAKD,kBAAkB,SAAS;AACzBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,4BAA4B,QAAQ,EAAE;AAAA,OAC5C;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChMA,GAAG,WAAW,eAAe;"}