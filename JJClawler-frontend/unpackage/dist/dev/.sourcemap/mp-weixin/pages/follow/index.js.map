{"version":3,"file":"index.js","sources":["pages/follow/index.vue","pages/follow/index.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"follow-page\">\n    <!-- ÊàëÁöÑÂÖ≥Ê≥®Ê†áÈ¢òÂç°Áâá -->\n    <view class=\"header-card\">\n      <text class=\"header-title\">ÊàëÁöÑÂÖ≥Ê≥®</text>\n    </view>\n    \n    <!-- ÊêúÁ¥¢Ê†è -->\n    <view class=\"search-section\">\n      <view class=\"search-container\">\n        <view class=\"search-icon\">üîç</view>\n        <input \n          class=\"search-input\" \n          type=\"text\" \n          placeholder=\"ÊêúÁ¥¢\"\n          v-model=\"searchKeyword\"\n          @input=\"onSearchInput\"\n        />\n      </view>\n    </view>\n    \n    <!-- Follow Books Ê†áÈ¢ò -->\n    <view class=\"section-header\">\n      <text class=\"section-title\">Follow Books</text>\n    </view>\n    \n    <!-- ‰π¶Á±çÂàóË°® -->\n    <view class=\"books-section\">\n      <BookList \n        :books=\"followedBooks\"\n        :show-count=\"false\"\n        :show-rank=\"true\"\n        :show-actions=\"true\"\n        action-type=\"unfollow\"\n        empty-text=\"ÊöÇÊó†ÂÖ≥Ê≥®ÁöÑ‰π¶Á±ç\"\n        @book-tap=\"handleBookTap\"\n        @unfollow=\"handleUnfollow\"\n      />\n    </view>\n  </view>\n</template>\n\n<script>\nimport BookList from '@/components/BookList.vue'\n\n/**\n * ÂÖ≥Ê≥®È°µÈù¢\n * @description Â±ïÁ§∫Áî®Êà∑ÂÖ≥Ê≥®ÁöÑ‰π¶Á±çÂàóË°®ÔºåÊåâÁÖßFigmaËÆæËÆ°Ê†∑Âºè\n */\nexport default {\n  name: 'FollowPage',\n  \n  components: {\n    BookList\n  },\n  \n  data() {\n    return {\n      searchKeyword: '',\n      followedBooks: []\n    }\n  },\n  \n  onLoad() {\n    this.loadFollowedBooks()\n  },\n  \n  onShow() {\n    // ÊØèÊ¨°ÊòæÁ§∫Êó∂Âà∑Êñ∞ÂÖ≥Ê≥®ÂàóË°®\n    this.loadFollowedBooks()\n  },\n  \n  // ‰∏ãÊãâÂà∑Êñ∞\n  onPullDownRefresh() {\n    this.loadFollowedBooks().finally(() => {\n      uni.stopPullDownRefresh()\n    })\n  },\n  \n  methods: {\n    /**\n     * Âä†ËΩΩÂÖ≥Ê≥®ÁöÑ‰π¶Á±çÂàóË°®\n     */\n    async loadFollowedBooks() {\n      try {\n        // ËøôÈáåÂ∫îËØ•Ë∞ÉÁî®APIËé∑ÂèñÁî®Êà∑ÂÖ≥Ê≥®ÁöÑ‰π¶Á±ç\n        // const response = await this.$http.get('/api/user/followed-books')\n        // this.followedBooks = response.data\n        \n        // Ê®°ÊãüÊï∞ÊçÆ\n        this.followedBooks = Array.from({ length: 20 }, (_, index) => ({\n          id: `book_${index + 1}`,\n          title: 'ÈáçÁîü‰πãÂÜúÂ•≥',\n          clicks: 193,\n          collections: 34\n        }))\n        \n        console.log('Âä†ËΩΩÂÖ≥Ê≥®‰π¶Á±çÂàóË°®:', this.followedBooks.length)\n      } catch (error) {\n        console.error('Âä†ËΩΩÂÖ≥Ê≥®‰π¶Á±çÂ§±Ë¥•:', error)\n        uni.showToast({\n          title: 'Âä†ËΩΩÂ§±Ë¥•',\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    },\n    \n    /**\n     * ÊêúÁ¥¢ËæìÂÖ•\n     */\n    onSearchInput(e) {\n      console.log('ÊêúÁ¥¢ÂÖ≥Ê≥®‰π¶Á±ç:', e.detail.value)\n      // ËøôÈáåÂèØ‰ª•ÂÆûÁé∞ÊêúÁ¥¢ÈÄªËæë\n      this.searchKeyword = e.detail.value\n      // ÂèØ‰ª•Ê∑ªÂä†Èò≤ÊäñÊêúÁ¥¢ÂäüËÉΩ\n    },\n    \n    /**\n     * Â§ÑÁêÜ‰π¶Á±çÁÇπÂáªÔºàBookListÁªÑ‰ª∂‰∫ã‰ª∂Ôºâ\n     */\n    handleBookTap({ book, index }) {\n      this.goToBookDetail(book)\n    },\n\n    /**\n     * Â§ÑÁêÜÂèñÊ∂àÂÖ≥Ê≥®ÔºàBookListÁªÑ‰ª∂‰∫ã‰ª∂Ôºâ\n     */\n    handleUnfollow({ book, index }) {\n      this.unfollowBook(book)\n    },\n\n    /**\n     * Ë∑≥ËΩ¨Âà∞‰π¶Á±çËØ¶ÊÉÖ\n     */\n    goToBookDetail(book) {\n      uni.navigateTo({\n        url: `/pages/book/detail?id=${book.id}`\n      })\n    },\n    \n    /**\n     * ÂèñÊ∂àÂÖ≥Ê≥®‰π¶Á±ç\n     */\n    async unfollowBook(book) {\n      try {\n        // ËøôÈáåÂ∫îËØ•Ë∞ÉÁî®APIÂèñÊ∂àÂÖ≥Ê≥®\n        // await this.$http.delete(`/api/user/follow/${book.id}`)\n        \n        // ‰ªéÂàóË°®‰∏≠ÁßªÈô§\n        const index = this.followedBooks.findIndex(item => item.id === book.id)\n        if (index > -1) {\n          this.followedBooks.splice(index, 1)\n        }\n        \n        uni.showToast({\n          title: 'Â∑≤ÂèñÊ∂àÂÖ≥Ê≥®',\n          icon: 'success',\n          duration: 1500\n        })\n      } catch (error) {\n        console.error('ÂèñÊ∂àÂÖ≥Ê≥®Â§±Ë¥•:', error)\n        uni.showToast({\n          title: 'Êìç‰ΩúÂ§±Ë¥•',\n          icon: 'none',\n          duration: 2000\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.follow-page {\n  min-height: 100vh;\n  background-color: #f4f0eb;\n  padding-bottom: $safe-area-bottom;\n}\n\n.header-card {\n  margin: 32rpx;\n  background-color: #c3c3c3;\n  border-radius: 16rpx;\n  padding: 80rpx 40rpx;\n  text-align: center;\n  \n  .header-title {\n    font-size: 64rpx;\n    font-weight: 600;\n    color: #ffffff;\n    font-family: 'Inter', sans-serif;\n  }\n}\n\n.search-section {\n  padding: 0 32rpx 32rpx;\n  \n  .search-container {\n    display: flex;\n    align-items: center;\n    background-color: #ffffff;\n    border-radius: 48rpx;\n    padding: 0 32rpx;\n    height: 96rpx;\n    \n    .search-icon {\n      font-size: 32rpx;\n      color: #999999;\n      margin-right: 16rpx;\n    }\n    \n    .search-input {\n      flex: 1;\n      font-size: 32rpx;\n      color: #333333;\n      \n      &::placeholder {\n        color: #999999;\n      }\n    }\n  }\n}\n\n.section-header {\n  padding: 0 32rpx 32rpx;\n  \n  .section-title {\n    font-size: 36rpx;\n    font-weight: 600;\n    color: #000000;\n    font-family: 'Inter', sans-serif;\n  }\n}\n\n.books-section {\n  padding: 0 32rpx;\n  \n  .books-list {\n    .book-item {\n      display: flex;\n      align-items: center;\n      background-color: #c3c3c3;\n      border-radius: 16rpx;\n      padding: 24rpx;\n      margin-bottom: 16rpx;\n      \n      .book-rank {\n        width: 48rpx;\n        height: 48rpx;\n        background-color: #999999;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 24rpx;\n        font-weight: 600;\n        color: #ffffff;\n        margin-right: 24rpx;\n      }\n      \n      .book-info {\n        flex: 1;\n        \n        .book-title {\n          display: block;\n          font-size: 32rpx;\n          font-weight: 500;\n          color: #333333;\n          margin-bottom: 8rpx;\n        }\n        \n        .book-stats {\n          display: flex;\n          gap: 24rpx;\n          \n          .book-stat {\n            font-size: 24rpx;\n            color: #666666;\n          }\n        }\n      }\n      \n      &:active {\n        opacity: 0.8;\n      }\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/guliyu/weixin-miniapp/JJClawler-frontend/JJClawler-frontend/pages/follow/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA2CA,MAAO,WAAU,MAAW;AAM5B,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EAEN,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EAED,OAAO;AACL,WAAO;AAAA,MACL,eAAe;AAAA,MACf,eAAe,CAAC;AAAA,IAClB;AAAA,EACD;AAAA,EAED,SAAS;AACP,SAAK,kBAAkB;AAAA,EACxB;AAAA,EAED,SAAS;AAEP,SAAK,kBAAkB;AAAA,EACxB;AAAA;AAAA,EAGD,oBAAoB;AAClB,SAAK,oBAAoB,QAAQ,MAAM;AACrCA,oBAAAA,MAAI,oBAAoB;AAAA,KACzB;AAAA,EACF;AAAA,EAED,SAAS;AAAA;AAAA;AAAA;AAAA,IAIP,MAAM,oBAAoB;AACxB,UAAI;AAMF,aAAK,gBAAgB,MAAM,KAAK,EAAE,QAAQ,GAAI,GAAE,CAAC,GAAG,WAAW;AAAA,UAC7D,IAAI,QAAQ,QAAQ,CAAC;AAAA,UACrB,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,aAAa;AAAA,QACf,EAAE;AAEFA,yEAAY,aAAa,KAAK,cAAc,MAAM;AAAA,MAClD,SAAO,OAAO;AACdA,sBAAAA,MAAc,MAAA,SAAA,iCAAA,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,SACX;AAAA,MACH;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,cAAc,GAAG;AACfA,oBAAA,MAAA,MAAA,OAAA,iCAAY,WAAW,EAAE,OAAO,KAAK;AAErC,WAAK,gBAAgB,EAAE,OAAO;AAAA,IAE/B;AAAA;AAAA;AAAA;AAAA,IAKD,cAAc,EAAE,MAAM,SAAS;AAC7B,WAAK,eAAe,IAAI;AAAA,IACzB;AAAA;AAAA;AAAA;AAAA,IAKD,eAAe,EAAE,MAAM,SAAS;AAC9B,WAAK,aAAa,IAAI;AAAA,IACvB;AAAA;AAAA;AAAA;AAAA,IAKD,eAAe,MAAM;AACnBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,yBAAyB,KAAK,EAAE;AAAA,OACtC;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAKD,MAAM,aAAa,MAAM;AACvB,UAAI;AAKF,cAAM,QAAQ,KAAK,cAAc,UAAU,UAAQ,KAAK,OAAO,KAAK,EAAE;AACtE,YAAI,QAAQ,IAAI;AACd,eAAK,cAAc,OAAO,OAAO,CAAC;AAAA,QACpC;AAEAA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,SACX;AAAA,MACD,SAAO,OAAO;AACdA,sBAAAA,MAAA,MAAA,SAAA,iCAAc,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,SACX;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;ACzKA,GAAG,WAAW,eAAe;"}