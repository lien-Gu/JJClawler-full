{"version":3,"file":"detail.js","sources":["pages/book/detail.vue","pages/book/detail.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"book-detail-page\">\n    <!-- ‰π¶Á±çÂ§¥ÈÉ®‰ø°ÊÅØ -->\n    <view class=\"book-header\">\n      <view class=\"header-bg\"></view>\n      <view class=\"header-content\">\n        <view class=\"book-cover-section\">\n          <view class=\"book-cover\" v-if=\"bookData.cover\">\n            <image :src=\"bookData.cover\" mode=\"aspectFit\" class=\"cover-image\" />\n          </view>\n          <view class=\"book-cover placeholder\" v-else>\n            <text class=\"cover-text\">üìñ</text>\n          </view>\n        </view>\n        \n        <view class=\"book-info-section\">\n          <text class=\"book-title\">{{ bookData.name || bookData.title || '‰π¶Á±çËØ¶ÊÉÖ' }}</text>\n          <text class=\"book-author\" v-if=\"bookData.author\">‰ΩúËÄÖÔºö{{ bookData.author }}</text>\n          <view class=\"book-meta\">\n            <text class=\"meta-item\" v-if=\"bookData.category\">{{ bookData.category }}</text>\n            <text class=\"meta-divider\" v-if=\"bookData.category && bookData.status\">¬∑</text>\n            <text class=\"meta-item\" v-if=\"bookData.status\">{{ bookData.status }}</text>\n            <text class=\"meta-divider\" v-if=\"bookData.status && bookData.wordCount\">¬∑</text>\n            <text class=\"meta-item\" v-if=\"bookData.wordCount\">{{ formatWordCount(bookData.wordCount) }}Â≠ó</text>\n          </view>\n          \n          <view class=\"book-actions\">\n            <view class=\"action-btn follow-btn\" :class=\"{ 'followed': bookData.isFollowed }\" @tap=\"toggleFollow\">\n              <text class=\"btn-text\">{{ bookData.isFollowed ? 'Â∑≤ÂÖ≥Ê≥®' : 'ÂÖ≥Ê≥®' }}</text>\n            </view>\n            <view class=\"action-btn read-btn\" @tap=\"readBook\">\n              <text class=\"btn-text\">ÈòÖËØª</text>\n            </view>\n            <view class=\"action-btn share-btn\" @tap=\"shareBook\">\n              <text class=\"btn-text\">ÂàÜ‰∫´</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n    \n    <!-- ÁªüËÆ°Êï∞ÊçÆ -->\n    <view class=\"stats-section\">\n      <view class=\"stats-grid\">\n        <view class=\"stat-item\">\n          <text class=\"stat-value\">{{ formatNumber(bookData.readCount || 0) }}</text>\n          <text class=\"stat-label\">ÈòÖËØªÈáè</text>\n        </view>\n        <view class=\"stat-item\">\n          <text class=\"stat-value\">{{ formatNumber(bookData.collectCount || 0) }}</text>\n          <text class=\"stat-label\">Êî∂ËóèÈáè</text>\n        </view>\n        <view class=\"stat-item\">\n          <text class=\"stat-value\">{{ bookData.score || 'ÊöÇÊó†' }}</text>\n          <text class=\"stat-label\">ËØÑÂàÜ</text>\n        </view>\n        <view class=\"stat-item\">\n          <text class=\"stat-value\">{{ formatTime(bookData.updateTime) }}</text>\n          <text class=\"stat-label\">Êõ¥Êñ∞Êó∂Èó¥</text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- ‰π¶Á±çÁÆÄ‰ªã -->\n    <view class=\"description-section\" v-if=\"bookData.description\">\n      <view class=\"section-header\">\n        <text class=\"section-title\">‰ΩúÂìÅÁÆÄ‰ªã</text>\n      </view>\n      <view class=\"description-content\">\n        <text class=\"description-text\" :class=\"{ 'expanded': descriptionExpanded }\">{{ bookData.description }}</text>\n        <view class=\"expand-btn\" @tap=\"toggleDescription\" v-if=\"bookData.description && bookData.description.length > 100\">\n          <text class=\"expand-text\">{{ descriptionExpanded ? 'Êî∂Ëµ∑' : 'Â±ïÂºÄ' }}</text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- Ê†áÁ≠æ‰ø°ÊÅØ -->\n    <view class=\"tags-section\" v-if=\"bookData.tags && bookData.tags.length\">\n      <view class=\"section-header\">\n        <text class=\"section-title\">‰ΩúÂìÅÊ†áÁ≠æ</text>\n      </view>\n      <view class=\"tags-list\">\n        <text class=\"tag\" v-for=\"tag in bookData.tags\" :key=\"tag\">{{ tag }}</text>\n      </view>\n    </view>\n    \n    <!-- Ê¶úÂçïÂéÜÂè≤ -->\n    <view class=\"rankings-section\">\n      <view class=\"section-header\">\n        <text class=\"section-title\">Ê¶úÂçïÂéÜÂè≤</text>\n        <text class=\"section-more\" @tap=\"showAllRankings\" v-if=\"rankingsList.length > 3\">Êü•ÁúãÂÖ®ÈÉ®</text>\n      </view>\n      \n      <view class=\"rankings-list\" v-if=\"rankingsList.length > 0\">\n        <RankingCard \n          v-for=\"ranking in displayRankings\" \n          :key=\"ranking.id\"\n          :ranking=\"ranking\"\n          :showActions=\"false\"\n          :showPreview=\"false\"\n          @click=\"goToRankingDetail\"\n        />\n      </view>\n      \n      <!-- Á©∫Áä∂ÊÄÅ -->\n      <view class=\"empty-state\" v-else-if=\"!loadingRankings\">\n        <text class=\"empty-icon\">üìä</text>\n        <text class=\"empty-text\">ÊöÇÊó†Ê¶úÂçïËÆ∞ÂΩï</text>\n      </view>\n      \n      <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\n      <view class=\"loading-state\" v-if=\"loadingRankings\">\n        <text class=\"loading-text\">Âä†ËΩΩ‰∏≠...</text>\n      </view>\n    </view>\n    \n    <!-- Áõ∏ÂÖ≥Êé®Ëçê -->\n    <view class=\"recommendations-section\" v-if=\"recommendedBooks.length > 0\">\n      <view class=\"section-header\">\n        <text class=\"section-title\">Áõ∏ÂÖ≥Êé®Ëçê</text>\n      </view>\n      <scroll-view class=\"recommendations-scroll\" scroll-x>\n        <view class=\"recommendations-list\">\n          <view \n            class=\"recommendation-item\" \n            v-for=\"book in recommendedBooks\" \n            :key=\"book.id\"\n            @tap=\"goToBookDetail(book)\"\n          >\n            <view class=\"rec-cover\" v-if=\"book.cover\">\n              <image :src=\"book.cover\" mode=\"aspectFit\" class=\"rec-cover-image\" />\n            </view>\n            <view class=\"rec-cover placeholder\" v-else>\n              <text class=\"rec-cover-text\">üìñ</text>\n            </view>\n            <text class=\"rec-title\">{{ book.name || book.title }}</text>\n            <text class=\"rec-author\" v-if=\"book.author\">{{ book.author }}</text>\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n    \n    <!-- Ê¶úÂçïÂéÜÂè≤ËØ¶ÊÉÖÂºπÁ™ó -->\n    <view class=\"rankings-popup\" v-if=\"showRankingsPopup\" @tap=\"hideRankingsPopup\">\n      <view class=\"popup-content\" @tap.stop>\n        <view class=\"popup-header\">\n          <text class=\"popup-title\">ÂÆåÊï¥Ê¶úÂçïÂéÜÂè≤</text>\n          <view class=\"popup-close\" @tap=\"hideRankingsPopup\">\n            <text class=\"close-text\">√ó</text>\n          </view>\n        </view>\n        <scroll-view class=\"popup-scroll\" scroll-y>\n          <view class=\"popup-rankings\">\n            <RankingCard \n              v-for=\"ranking in rankingsList\" \n              :key=\"ranking.id\"\n              :ranking=\"ranking\"\n              :showActions=\"false\"\n              :showPreview=\"false\"\n              @click=\"goToRankingDetail\"\n            />\n          </view>\n        </scroll-view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport RankingCard from '@/components/RankingCard.vue'\nimport { get } from '@/utils/request.js'\nimport { getSync, setSync } from '@/utils/storage.js'\n\n/**\n * ‰π¶Á±çËØ¶ÊÉÖÈ°µÈù¢\n * @description Â±ïÁ§∫‰π¶Á±çËØ¶ÁªÜ‰ø°ÊÅØÂíåÂéÜÂè≤Ê¶úÂçïËÆ∞ÂΩï\n */\nexport default {\n  name: 'BookDetailPage',\n  components: {\n    RankingCard\n  },\n  \n  data() {\n    return {\n      // ‰π¶Á±çID\n      bookId: '',\n      \n      // ‰π¶Á±çÊï∞ÊçÆ\n      bookData: {},\n      \n      // Ê¶úÂçïÂéÜÂè≤ÂàóË°®\n      rankingsList: [],\n      \n      // Áõ∏ÂÖ≥Êé®Ëçê‰π¶Á±ç\n      recommendedBooks: [],\n      \n      // ÁÆÄ‰ªãÂ±ïÂºÄÁä∂ÊÄÅ\n      descriptionExpanded: false,\n      \n      // Ê¶úÂçïÂºπÁ™óÊòæÁ§∫Áä∂ÊÄÅ\n      showRankingsPopup: false,\n      \n      // Âä†ËΩΩÁä∂ÊÄÅ\n      loading: false,\n      loadingRankings: false\n    }\n  },\n  \n  computed: {\n    /**\n     * ÊòæÁ§∫ÁöÑÊ¶úÂçïÂàóË°®ÔºàÂâç3‰∏™Ôºâ\n     */\n    displayRankings() {\n      return this.rankingsList.slice(0, 3)\n    }\n  },\n  \n  onLoad(options) {\n    if (options.id) {\n      this.bookId = options.id\n      this.initData()\n    }\n  },\n  \n  // ‰∏ãÊãâÂà∑Êñ∞\n  onPullDownRefresh() {\n    this.refreshData().finally(() => {\n      uni.stopPullDownRefresh()\n    })\n  },\n  \n  methods: {\n    /**\n     * ÂàùÂßãÂåñÊï∞ÊçÆ\n     */\n    async initData() {\n      this.loading = true\n      \n      try {\n        // Âä†ËΩΩÁºìÂ≠òÊï∞ÊçÆ\n        this.loadCachedData()\n        \n        // Ëé∑ÂèñÊúÄÊñ∞Êï∞ÊçÆ\n        await Promise.all([\n          this.fetchBookInfo(),\n          this.fetchRankingsHistory(),\n          this.fetchRecommendations()\n        ])\n      } catch (error) {\n        console.error('ÂàùÂßãÂåñÊï∞ÊçÆÂ§±Ë¥•:', error)\n        this.showError('Êï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•')\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    /**\n     * Âä†ËΩΩÁºìÂ≠òÊï∞ÊçÆ\n     */\n    loadCachedData() {\n      const cachedBook = getSync(`book_${this.bookId}`)\n      const cachedRankings = getSync(`book_rankings_${this.bookId}`)\n      const cachedRecommendations = getSync(`book_recommendations_${this.bookId}`)\n      \n      if (cachedBook) {\n        this.bookData = cachedBook\n      }\n      \n      if (cachedRankings) {\n        this.rankingsList = cachedRankings\n      }\n      \n      if (cachedRecommendations) {\n        this.recommendedBooks = cachedRecommendations\n      }\n    },\n    \n    /**\n     * Ëé∑Âèñ‰π¶Á±ç‰ø°ÊÅØ\n     */\n    async fetchBookInfo() {\n      try {\n        const data = await get(`/api/books/${this.bookId}`)\n        if (data) {\n          this.bookData = data\n          setSync(`book_${this.bookId}`, data, 30 * 60 * 1000) // ÁºìÂ≠ò30ÂàÜÈíü\n        }\n      } catch (error) {\n        console.error('Ëé∑Âèñ‰π¶Á±ç‰ø°ÊÅØÂ§±Ë¥•:', error)\n        throw error\n      }\n    },\n    \n    /**\n     * Ëé∑ÂèñÊ¶úÂçïÂéÜÂè≤\n     */\n    async fetchRankingsHistory() {\n      this.loadingRankings = true\n      \n      try {\n        const data = await get(`/api/books/${this.bookId}/rankings`)\n        if (data && data.list) {\n          this.rankingsList = data.list\n          setSync(`book_rankings_${this.bookId}`, data.list, 15 * 60 * 1000) // ÁºìÂ≠ò15ÂàÜÈíü\n        }\n      } catch (error) {\n        console.error('Ëé∑ÂèñÊ¶úÂçïÂéÜÂè≤Â§±Ë¥•:', error)\n        throw error\n      } finally {\n        this.loadingRankings = false\n      }\n    },\n    \n    /**\n     * Ëé∑ÂèñÁõ∏ÂÖ≥Êé®Ëçê\n     */\n    async fetchRecommendations() {\n      try {\n        const data = await get(`/api/books/${this.bookId}/recommendations`, { limit: 8 })\n        if (data && data.list) {\n          this.recommendedBooks = data.list\n          setSync(`book_recommendations_${this.bookId}`, data.list, 60 * 60 * 1000) // ÁºìÂ≠ò1Â∞èÊó∂\n        }\n      } catch (error) {\n        console.error('Ëé∑ÂèñÁõ∏ÂÖ≥Êé®ËçêÂ§±Ë¥•:', error)\n        // Êé®ËçêÂ§±Ë¥•‰∏çÂΩ±Âìç‰∏ªË¶ÅÂäüËÉΩ\n      }\n    },\n    \n    /**\n     * Âà∑Êñ∞Êï∞ÊçÆ\n     */\n    async refreshData() {\n      try {\n        await Promise.all([\n          this.fetchBookInfo(),\n          this.fetchRankingsHistory(),\n          this.fetchRecommendations()\n        ])\n        \n        uni.showToast({\n          title: 'Âà∑Êñ∞ÊàêÂäü',\n          icon: 'success',\n          duration: 1500\n        })\n      } catch (error) {\n        this.showError('Âà∑Êñ∞Â§±Ë¥•')\n      }\n    },\n    \n    /**\n     * ÂàáÊç¢ÂÖ≥Ê≥®Áä∂ÊÄÅ\n     */\n    async toggleFollow() {\n      try {\n        const action = this.bookData.isFollowed ? 'unfollow' : 'follow'\n        await get(`/api/books/${this.bookId}/${action}`, {}, { method: 'POST' })\n        \n        this.bookData.isFollowed = !this.bookData.isFollowed\n        \n        uni.showToast({\n          title: this.bookData.isFollowed ? 'ÂÖ≥Ê≥®ÊàêÂäü' : 'ÂèñÊ∂àÂÖ≥Ê≥®',\n          icon: 'success',\n          duration: 1500\n        })\n      } catch (error) {\n        this.showError('Êìç‰ΩúÂ§±Ë¥•')\n      }\n    },\n    \n    /**\n     * ÈòÖËØª‰π¶Á±ç\n     */\n    readBook() {\n      // ËøôÈáåÂèØ‰ª•Ë∑≥ËΩ¨Âà∞ÈòÖËØªÈ°µÈù¢ÊàñÂ§ñÈÉ®ÈìæÊé•\n      if (this.bookData.readUrl) {\n        uni.navigateTo({\n          url: `/pages/reader/index?bookId=${this.bookId}`\n        })\n      } else {\n        uni.showToast({\n          title: 'ÈòÖËØªÂäüËÉΩÂºÄÂèë‰∏≠',\n          icon: 'none'\n        })\n      }\n    },\n    \n    /**\n     * ÂàÜ‰∫´‰π¶Á±ç\n     */\n    shareBook() {\n      uni.share({\n        provider: 'weixin',\n        scene: 'WXSceneSession',\n        type: 0,\n        title: this.bookData.name || this.bookData.title,\n        summary: `Êé®Ëçê‰∏ÄÊú¨Â•Ω‰π¶Ôºö${this.bookData.author ? '‰ΩúËÄÖ ' + this.bookData.author : ''}`,\n        success: () => {\n          uni.showToast({\n            title: 'ÂàÜ‰∫´ÊàêÂäü',\n            icon: 'success'\n          })\n        },\n        fail: () => {\n          this.showError('ÂàÜ‰∫´Â§±Ë¥•')\n        }\n      })\n    },\n    \n    /**\n     * ÂàáÊç¢ÁÆÄ‰ªãÂ±ïÂºÄÁä∂ÊÄÅ\n     */\n    toggleDescription() {\n      this.descriptionExpanded = !this.descriptionExpanded\n    },\n    \n    /**\n     * ÊòæÁ§∫ÂÖ®ÈÉ®Ê¶úÂçï\n     */\n    showAllRankings() {\n      this.showRankingsPopup = true\n    },\n    \n    /**\n     * ÈöêËóèÊ¶úÂçïÂºπÁ™ó\n     */\n    hideRankingsPopup() {\n      this.showRankingsPopup = false\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñÂ≠óÊï∞\n     */\n    formatWordCount(count) {\n      if (typeof count !== 'number') return count || '0'\n      \n      if (count >= 10000) {\n        return (count / 10000).toFixed(1) + '‰∏á'\n      } else if (count >= 1000) {\n        return (count / 1000).toFixed(1) + 'k'\n      }\n      \n      return count.toString()\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñÊï∞Â≠ó\n     */\n    formatNumber(num) {\n      if (typeof num !== 'number') return num || '0'\n      \n      if (num >= 10000) {\n        return (num / 10000).toFixed(1) + '‰∏á'\n      } else if (num >= 1000) {\n        return (num / 1000).toFixed(1) + 'k'\n      }\n      \n      return num.toString()\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñÊó∂Èó¥\n     */\n    formatTime(time) {\n      if (!time) return 'Êú™Áü•'\n      \n      const now = new Date()\n      const updateTime = new Date(time)\n      const diff = now - updateTime\n      \n      const hours = Math.floor(diff / (1000 * 60 * 60))\n      const days = Math.floor(diff / (1000 * 60 * 60 * 24))\n      \n      if (hours < 24) {\n        return `${hours}Â∞èÊó∂Ââç`\n      } else if (days < 7) {\n        return `${days}Â§©Ââç`\n      } else {\n        return updateTime.toLocaleDateString()\n      }\n    },\n    \n    /**\n     * ÊòæÁ§∫ÈîôËØØÊèêÁ§∫\n     */\n    showError(message) {\n      uni.showToast({\n        title: message,\n        icon: 'none',\n        duration: 2000\n      })\n    },\n    \n    /**\n     * Ë∑≥ËΩ¨Âà∞Ê¶úÂçïËØ¶ÊÉÖ\n     */\n    goToRankingDetail(ranking) {\n      uni.navigateTo({\n        url: `/pages/ranking/detail?id=${ranking.id}`\n      })\n    },\n    \n    /**\n     * Ë∑≥ËΩ¨Âà∞‰π¶Á±çËØ¶ÊÉÖ\n     */\n    goToBookDetail(book) {\n      if (book.id === this.bookId) return\n      \n      uni.redirectTo({\n        url: `/pages/book/detail?id=${book.id}`\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.book-detail-page {\n  min-height: 100vh;\n  background-color: $page-background;\n  padding-bottom: $safe-area-bottom;\n}\n\n.book-header {\n  position: relative;\n  padding: $spacing-lg;\n  color: white;\n  overflow: hidden;\n  \n  .header-bg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, $primary-color, $secondary-color);\n    z-index: -1;\n  }\n  \n  .header-content {\n    @include flex-center;\n    align-items: flex-start;\n    gap: $spacing-lg;\n  }\n  \n  .book-cover-section {\n    flex-shrink: 0;\n    \n    .book-cover {\n      width: 200rpx;\n      height: 280rpx;\n      border-radius: $border-radius-medium;\n      overflow: hidden;\n      background-color: rgba(255, 255, 255, 0.1);\n      @include flex-center;\n      \n      .cover-image {\n        width: 100%;\n        height: 100%;\n      }\n      \n      &.placeholder {\n        .cover-text {\n          font-size: 60rpx;\n          opacity: 0.7;\n        }\n      }\n    }\n  }\n  \n  .book-info-section {\n    flex: 1;\n    \n    .book-title {\n      display: block;\n      font-size: $font-size-xl;\n      font-weight: bold;\n      margin-bottom: $spacing-xs;\n      line-height: 1.3;\n    }\n    \n    .book-author {\n      display: block;\n      font-size: $font-size-sm;\n      opacity: 0.9;\n      margin-bottom: $spacing-xs;\n    }\n    \n    .book-meta {\n      @include flex-center;\n      gap: $spacing-xs;\n      margin-bottom: $spacing-lg;\n      \n      .meta-item {\n        font-size: $font-size-xs;\n        opacity: 0.8;\n      }\n      \n      .meta-divider {\n        opacity: 0.6;\n      }\n    }\n    \n    .book-actions {\n      @include flex-center;\n      gap: $spacing-sm;\n      \n      .action-btn {\n        @include flex-center;\n        padding: $spacing-xs $spacing-md;\n        border-radius: $border-radius-medium;\n        transition: all 0.3s ease;\n        \n        .btn-text {\n          font-size: $font-size-sm;\n          color: white;\n        }\n        \n        &:active {\n          opacity: 0.7;\n        }\n      }\n      \n      .follow-btn {\n        background-color: rgba(255, 255, 255, 0.2);\n        \n        &.followed {\n          background-color: rgba(255, 255, 255, 0.3);\n        }\n      }\n      \n      .read-btn {\n        background-color: $accent-color;\n      }\n      \n      .share-btn {\n        background-color: transparent;\n        border: 2rpx solid rgba(255, 255, 255, 0.3);\n      }\n    }\n  }\n}\n\n.stats-section {\n  padding: $spacing-lg;\n  background-color: white;\n  margin-bottom: $spacing-sm;\n  \n  .stats-grid {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: $spacing-md;\n    \n    .stat-item {\n      @include flex-column-center;\n      \n      .stat-value {\n        font-size: $font-size-lg;\n        font-weight: bold;\n        color: $primary-color;\n        margin-bottom: 4rpx;\n      }\n      \n      .stat-label {\n        font-size: $font-size-xs;\n        color: $text-secondary;\n      }\n    }\n  }\n}\n\n.description-section,\n.tags-section,\n.rankings-section,\n.recommendations-section {\n  background-color: white;\n  margin-bottom: $spacing-sm;\n  padding: $spacing-lg;\n}\n\n.section-header {\n  @include flex-between;\n  align-items: center;\n  margin-bottom: $spacing-md;\n  \n  .section-title {\n    font-size: $font-size-lg;\n    font-weight: bold;\n    color: $text-primary;\n  }\n  \n  .section-more {\n    font-size: $font-size-sm;\n    color: $primary-color;\n    \n    &:active {\n      opacity: 0.7;\n    }\n  }\n}\n\n.description-content {\n  .description-text {\n    display: block;\n    font-size: $font-size-md;\n    color: $text-primary;\n    line-height: 1.6;\n    \n    &:not(.expanded) {\n      display: -webkit-box;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n    }\n  }\n  \n  .expand-btn {\n    margin-top: $spacing-sm;\n    \n    .expand-text {\n      color: $primary-color;\n      font-size: $font-size-sm;\n    }\n    \n    &:active {\n      opacity: 0.7;\n    }\n  }\n}\n\n.tags-list {\n  @include flex-center;\n  gap: $spacing-sm;\n  flex-wrap: wrap;\n  \n  .tag {\n    padding: $spacing-xs $spacing-md;\n    background-color: $background-color;\n    border-radius: $border-radius-medium;\n    font-size: $font-size-sm;\n    color: $text-secondary;\n  }\n}\n\n.rankings-list {\n  .ranking-card {\n    margin-bottom: $spacing-sm;\n    \n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n}\n\n.empty-state,\n.loading-state {\n  @include flex-column-center;\n  padding: $spacing-xl;\n  \n  .empty-icon {\n    font-size: 80rpx;\n    margin-bottom: $spacing-md;\n  }\n  \n  .empty-text,\n  .loading-text {\n    color: $text-placeholder;\n    font-size: $font-size-md;\n  }\n}\n\n.recommendations-scroll {\n  white-space: nowrap;\n  \n  .recommendations-list {\n    @include flex-center;\n    gap: $spacing-md;\n    padding-bottom: $spacing-xs;\n  }\n  \n  .recommendation-item {\n    @include flex-column-center;\n    width: 160rpx;\n    \n    .rec-cover {\n      width: 120rpx;\n      height: 160rpx;\n      border-radius: $border-radius-small;\n      overflow: hidden;\n      background-color: $background-color;\n      @include flex-center;\n      margin-bottom: $spacing-xs;\n      \n      .rec-cover-image {\n        width: 100%;\n        height: 100%;\n      }\n      \n      &.placeholder {\n        .rec-cover-text {\n          font-size: 40rpx;\n          color: $text-placeholder;\n        }\n      }\n    }\n    \n    .rec-title {\n      display: block;\n      font-size: $font-size-sm;\n      color: $text-primary;\n      text-align: center;\n      margin-bottom: 4rpx;\n      @include text-ellipsis;\n      width: 100%;\n    }\n    \n    .rec-author {\n      font-size: $font-size-xs;\n      color: $text-secondary;\n      text-align: center;\n      @include text-ellipsis;\n      width: 100%;\n    }\n    \n    &:active {\n      opacity: 0.7;\n    }\n  }\n}\n\n.rankings-popup {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  @include flex-center;\n  z-index: 1000;\n  \n  .popup-content {\n    background-color: white;\n    border-radius: $border-radius-large;\n    margin: $spacing-lg;\n    max-width: 700rpx;\n    width: 100%;\n    max-height: 80vh;\n    overflow: hidden;\n  }\n  \n  .popup-header {\n    @include flex-between;\n    align-items: center;\n    padding: $spacing-lg;\n    border-bottom: 2rpx solid $border-light;\n    \n    .popup-title {\n      font-size: $font-size-lg;\n      font-weight: bold;\n      color: $text-primary;\n    }\n    \n    .popup-close {\n      @include flex-center;\n      width: 60rpx;\n      height: 60rpx;\n      border-radius: 50%;\n      \n      .close-text {\n        font-size: $font-size-xl;\n        color: $text-placeholder;\n      }\n      \n      &:active {\n        background-color: $background-color;\n      }\n    }\n  }\n  \n  .popup-scroll {\n    max-height: 60vh;\n    \n    .popup-rankings {\n      padding: $spacing-lg;\n      \n      .ranking-card {\n        margin-bottom: $spacing-sm;\n        \n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/guliyu/weixin-miniapp/JJClawler-frontend/JJClawler-frontend/pages/book/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getSync","get","setSync"],"mappings":"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"}