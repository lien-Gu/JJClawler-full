{"version":3,"file":"BookCard.js","sources":["components/BookCard.vue","/Users/guliyu/weixin-miniapp/JJClawler-frontend/JJClawler-frontend/components/BookCard.vue?type=component"],"sourcesContent":["<template>\n  <view class=\"book-card\" :class=\"{ 'clickable': clickable }\" @tap=\"onClick\">\n    <view class=\"book-header\">\n      <view class=\"book-cover\" v-if=\"book.cover\">\n        <image :src=\"book.cover\" mode=\"aspectFit\" class=\"cover-image\" />\n      </view>\n      <view class=\"book-cover placeholder\" v-else>\n        <text class=\"cover-text\">üìñ</text>\n      </view>\n      \n      <view class=\"book-info\">\n        <text class=\"book-title\">{{ book.name || book.title }}</text>\n        <text class=\"book-author\" v-if=\"book.author\">{{ book.author }}</text>\n        <text class=\"book-category\" v-if=\"book.category\">{{ book.category }}</text>\n        \n        <view class=\"book-tags\" v-if=\"book.tags && book.tags.length\">\n          <text \n            class=\"tag\" \n            v-for=\"tag in book.tags.slice(0, 3)\" \n            :key=\"tag\"\n          >\n            {{ tag }}\n          </text>\n        </view>\n      </view>\n      \n      <view class=\"book-rank\" v-if=\"book.rank\">\n        <text class=\"rank-number\">{{ book.rank }}</text>\n        <text class=\"rank-label\">Âêç</text>\n      </view>\n    </view>\n    \n    <view class=\"book-description\" v-if=\"book.description && showDescription\">\n      <text class=\"desc-text\">{{ book.description }}</text>\n    </view>\n    \n    <view class=\"book-stats\">\n      <view class=\"stat-item\" v-if=\"book.wordCount\">\n        <text class=\"stat-label\">Â≠óÊï∞</text>\n        <text class=\"stat-value\">{{ formatWordCount(book.wordCount) }}</text>\n      </view>\n      <view class=\"stat-item\" v-if=\"book.updateTime\">\n        <text class=\"stat-label\">Êõ¥Êñ∞</text>\n        <text class=\"stat-value\">{{ formatTime(book.updateTime) }}</text>\n      </view>\n      <view class=\"stat-item\" v-if=\"book.status\">\n        <text class=\"stat-label\">Áä∂ÊÄÅ</text>\n        <text class=\"stat-value\" :class=\"statusClass\">{{ book.status }}</text>\n      </view>\n      <view class=\"stat-item\" v-if=\"book.score\">\n        <text class=\"stat-label\">ËØÑÂàÜ</text>\n        <text class=\"stat-value score\">{{ book.score }}</text>\n      </view>\n    </view>\n    \n    <view class=\"book-rankings\" v-if=\"showRankings && book.rankings && book.rankings.length\">\n      <text class=\"rankings-label\">Ê¶úÂçïÂéÜÂè≤Ôºö</text>\n      <view class=\"rankings-list\">\n        <text \n          class=\"ranking-item\" \n          v-for=\"ranking in book.rankings.slice(0, 2)\" \n          :key=\"ranking.id\"\n        >\n          {{ ranking.name }}\n        </text>\n      </view>\n    </view>\n    \n    <view class=\"book-actions\" v-if=\"showActions\">\n      <view class=\"action-btn follow-btn\" @tap.stop=\"onFollow\">\n        <text class=\"btn-text\">{{ book.isFollowed ? 'Â∑≤ÂÖ≥Ê≥®' : 'ÂÖ≥Ê≥®' }}</text>\n      </view>\n      <view class=\"action-btn read-btn\" @tap.stop=\"onRead\">\n        <text class=\"btn-text\">ÈòÖËØª</text>\n      </view>\n      <view class=\"action-btn share-btn\" @tap.stop=\"onShare\">\n        <text class=\"btn-text\">ÂàÜ‰∫´</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\n/**\n * ‰π¶Á±çÂç°ÁâáÁªÑ‰ª∂\n * @description Áî®‰∫éÂ±ïÁ§∫‰π¶Á±ç‰ø°ÊÅØÁöÑÂç°ÁâáÁªÑ‰ª∂ÔºåÊîØÊåÅÂ∞ÅÈù¢„ÄÅÁªüËÆ°Êï∞ÊçÆ„ÄÅÊìç‰ΩúÁ≠â\n * @property {Object} book ‰π¶Á±çÊï∞ÊçÆÂØπË±°\n * @property {Boolean} clickable ÊòØÂê¶ÂèØÁÇπÂáª\n * @property {Boolean} showDescription ÊòØÂê¶ÊòæÁ§∫ÊèèËø∞\n * @property {Boolean} showRankings ÊòØÂê¶ÊòæÁ§∫Ê¶úÂçïÂéÜÂè≤\n * @property {Boolean} showActions ÊòØÂê¶ÊòæÁ§∫Êìç‰ΩúÊåâÈíÆ\n * @event {Function} click ÁÇπÂáª‰∫ã‰ª∂\n * @event {Function} follow ÂÖ≥Ê≥®‰∫ã‰ª∂\n * @event {Function} read ÈòÖËØª‰∫ã‰ª∂\n * @event {Function} share ÂàÜ‰∫´‰∫ã‰ª∂\n */\nexport default {\n  name: 'BookCard',\n  props: {\n    book: {\n      type: Object,\n      required: true,\n      default: () => ({})\n    },\n    clickable: {\n      type: Boolean,\n      default: true\n    },\n    showDescription: {\n      type: Boolean,\n      default: false\n    },\n    showRankings: {\n      type: Boolean,\n      default: true\n    },\n    showActions: {\n      type: Boolean,\n      default: false\n    }\n  },\n  \n  computed: {\n    /**\n     * Áä∂ÊÄÅÊ†∑ÂºèÁ±ª\n     */\n    statusClass() {\n      const status = this.book.status\n      if (status === 'ÂÆåÁªì') return 'status-completed'\n      if (status === 'ËøûËΩΩ') return 'status-ongoing'\n      return 'status-default'\n    }\n  },\n  \n  methods: {\n    /**\n     * Ê†ºÂºèÂåñÂ≠óÊï∞ÊòæÁ§∫\n     */\n    formatWordCount(count) {\n      if (typeof count !== 'number') return count || 'Êú™Áü•'\n      \n      if (count >= 10000) {\n        return (count / 10000).toFixed(1) + '‰∏áÂ≠ó'\n      } else if (count >= 1000) {\n        return (count / 1000).toFixed(1) + 'ÂçÉÂ≠ó'\n      }\n      \n      return count + 'Â≠ó'\n    },\n    \n    /**\n     * Ê†ºÂºèÂåñÊó∂Èó¥ÊòæÁ§∫\n     */\n    formatTime(time) {\n      if (!time) return 'Êú™Áü•'\n      \n      const now = new Date()\n      const updateTime = new Date(time)\n      const diff = now - updateTime\n      \n      const minutes = Math.floor(diff / (1000 * 60))\n      const hours = Math.floor(diff / (1000 * 60 * 60))\n      const days = Math.floor(diff / (1000 * 60 * 60 * 24))\n      \n      if (minutes < 60) {\n        return `${minutes}ÂàÜÈíüÂâç`\n      } else if (hours < 24) {\n        return `${hours}Â∞èÊó∂Ââç`\n      } else if (days < 30) {\n        return `${days}Â§©Ââç`\n      } else {\n        return updateTime.toLocaleDateString()\n      }\n    },\n    \n    /**\n     * ÁÇπÂáªÂç°Áâá‰∫ã‰ª∂\n     */\n    onClick() {\n      if (this.clickable) {\n        this.$emit('click', this.book)\n      }\n    },\n    \n    /**\n     * ÂÖ≥Ê≥®/ÂèñÊ∂àÂÖ≥Ê≥®\n     */\n    onFollow() {\n      this.$emit('follow', {\n        book: this.book,\n        isFollowed: !this.book.isFollowed\n      })\n    },\n    \n    /**\n     * ÈòÖËØª‰π¶Á±ç\n     */\n    onRead() {\n      this.$emit('read', this.book)\n    },\n    \n    /**\n     * ÂàÜ‰∫´‰π¶Á±ç\n     */\n    onShare() {\n      this.$emit('share', this.book)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.book-card {\n  @include card-style;\n  padding: $spacing-lg;\n  margin-bottom: $spacing-sm;\n  transition: all 0.3s ease;\n  \n  &.clickable {\n    cursor: pointer;\n    \n    &:hover {\n      transform: translateY(-2rpx);\n      box-shadow: $shadow-dark;\n    }\n    \n    &:active {\n      transform: translateY(0);\n    }\n  }\n}\n\n.book-header {\n  @include flex-between;\n  align-items: flex-start;\n  margin-bottom: $spacing-md;\n}\n\n.book-cover {\n  flex-shrink: 0;\n  width: 100rpx;\n  height: 140rpx;\n  border-radius: $border-radius-small;\n  overflow: hidden;\n  margin-right: $spacing-md;\n  \n  &.placeholder {\n    @include flex-center;\n    background-color: $background-color;\n    border: 2rpx solid $border-light;\n    \n    .cover-text {\n      font-size: 40rpx;\n    }\n  }\n  \n  .cover-image {\n    width: 100%;\n    height: 100%;\n  }\n}\n\n.book-info {\n  flex: 1;\n  \n  .book-title {\n    display: block;\n    font-size: $font-size-lg;\n    font-weight: bold;\n    color: $text-primary;\n    margin-bottom: $spacing-xs;\n    @include text-ellipsis;\n  }\n  \n  .book-author {\n    display: block;\n    font-size: $font-size-sm;\n    color: $text-secondary;\n    margin-bottom: 4rpx;\n  }\n  \n  .book-category {\n    display: block;\n    font-size: $font-size-xs;\n    color: $text-placeholder;\n    margin-bottom: $spacing-xs;\n  }\n  \n  .book-tags {\n    @include flex-center;\n    flex-wrap: wrap;\n    gap: $spacing-xs;\n    \n    .tag {\n      padding: 2rpx 8rpx;\n      background-color: $background-color;\n      color: $text-secondary;\n      font-size: $font-size-xs;\n      border-radius: $border-radius-small;\n      border: 1rpx solid $border-light;\n    }\n  }\n}\n\n.book-rank {\n  @include flex-column-center;\n  flex-shrink: 0;\n  margin-left: $spacing-sm;\n  \n  .rank-number {\n    font-size: $font-size-xl;\n    font-weight: bold;\n    color: $accent-color;\n  }\n  \n  .rank-label {\n    font-size: $font-size-xs;\n    color: $text-placeholder;\n  }\n}\n\n.book-description {\n  margin-bottom: $spacing-md;\n  padding: $spacing-sm;\n  background-color: $background-color;\n  border-radius: $border-radius-small;\n  \n  .desc-text {\n    font-size: $font-size-sm;\n    color: $text-secondary;\n    line-height: 1.5;\n    @include text-ellipsis-multiline(3);\n  }\n}\n\n.book-stats {\n  @include flex-between;\n  padding: $spacing-sm 0;\n  border-top: 2rpx solid $border-light;\n  border-bottom: 2rpx solid $border-light;\n  margin-bottom: $spacing-sm;\n  \n  .stat-item {\n    @include flex-column-center;\n    flex: 1;\n    \n    .stat-label {\n      font-size: $font-size-xs;\n      color: $text-placeholder;\n      margin-bottom: 4rpx;\n    }\n    \n    .stat-value {\n      font-size: $font-size-sm;\n      font-weight: bold;\n      color: $text-primary;\n      \n      &.status-completed {\n        color: #4cd964;\n      }\n      \n      &.status-ongoing {\n        color: $primary-color;\n      }\n      \n      &.score {\n        color: $accent-color;\n      }\n    }\n  }\n}\n\n.book-rankings {\n  margin-bottom: $spacing-sm;\n  \n  .rankings-label {\n    font-size: $font-size-sm;\n    color: $text-secondary;\n    margin-bottom: $spacing-xs;\n  }\n  \n  .rankings-list {\n    @include flex-center;\n    gap: $spacing-xs;\n    \n    .ranking-item {\n      padding: 4rpx 12rpx;\n      background-color: $primary-color;\n      color: white;\n      font-size: $font-size-xs;\n      border-radius: $border-radius-small;\n      @include text-ellipsis;\n      max-width: 150rpx;\n    }\n  }\n}\n\n.book-actions {\n  @include flex-center;\n  gap: $spacing-sm;\n  \n  .action-btn {\n    @include flex-center;\n    padding: $spacing-xs $spacing-md;\n    border-radius: $border-radius-medium;\n    transition: all 0.3s ease;\n    flex: 1;\n    \n    .btn-text {\n      font-size: $font-size-sm;\n    }\n    \n    &:active {\n      opacity: 0.7;\n    }\n  }\n  \n  .follow-btn {\n    background-color: $secondary-color;\n    \n    .btn-text {\n      color: white;\n    }\n  }\n  \n  .read-btn {\n    background-color: $primary-color;\n    \n    .btn-text {\n      color: white;\n    }\n  }\n  \n  .share-btn {\n    background-color: transparent;\n    border: 2rpx solid $border-medium;\n    \n    .btn-text {\n      color: $text-secondary;\n    }\n  }\n}\n</style> ","import Component from '/Users/guliyu/weixin-miniapp/JJClawler-frontend/JJClawler-frontend/components/BookCard.vue'\nwx.createComponent(Component)"],"names":[],"mappings":";;AAgGA,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,UAAU;AAAA,MACV,SAAS,OAAO,CAAA;AAAA,IACjB;AAAA,IACD,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,iBAAiB;AAAA,MACf,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,EACD;AAAA,EAED,UAAU;AAAA;AAAA;AAAA;AAAA,IAIR,cAAc;AACZ,YAAM,SAAS,KAAK,KAAK;AACzB,UAAI,WAAW;AAAM,eAAO;AAC5B,UAAI,WAAW;AAAM,eAAO;AAC5B,aAAO;AAAA,IACT;AAAA,EACD;AAAA,EAED,SAAS;AAAA;AAAA;AAAA;AAAA,IAIP,gBAAgB,OAAO;AACrB,UAAI,OAAO,UAAU;AAAU,eAAO,SAAS;AAE/C,UAAI,SAAS,KAAO;AAClB,gBAAQ,QAAQ,KAAO,QAAQ,CAAC,IAAI;AAAA,MACtC,WAAW,SAAS,KAAM;AACxB,gBAAQ,QAAQ,KAAM,QAAQ,CAAC,IAAI;AAAA,MACrC;AAEA,aAAO,QAAQ;AAAA,IAChB;AAAA;AAAA;AAAA;AAAA,IAKD,WAAW,MAAM;AACf,UAAI,CAAC;AAAM,eAAO;AAElB,YAAM,MAAM,oBAAI,KAAK;AACrB,YAAM,aAAa,IAAI,KAAK,IAAI;AAChC,YAAM,OAAO,MAAM;AAEnB,YAAM,UAAU,KAAK,MAAM,QAAQ,MAAO,GAAG;AAC7C,YAAM,QAAQ,KAAK,MAAM,QAAQ,MAAO,KAAK,GAAG;AAChD,YAAM,OAAO,KAAK,MAAM,QAAQ,MAAO,KAAK,KAAK,GAAG;AAEpD,UAAI,UAAU,IAAI;AAChB,eAAO,GAAG,OAAO;AAAA,MACnB,WAAW,QAAQ,IAAI;AACrB,eAAO,GAAG,KAAK;AAAA,MACjB,WAAW,OAAO,IAAI;AACpB,eAAO,GAAG,IAAI;AAAA,aACT;AACL,eAAO,WAAW,mBAAmB;AAAA,MACvC;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,UAAU;AACR,UAAI,KAAK,WAAW;AAClB,aAAK,MAAM,SAAS,KAAK,IAAI;AAAA,MAC/B;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,WAAW;AACT,WAAK,MAAM,UAAU;AAAA,QACnB,MAAM,KAAK;AAAA,QACX,YAAY,CAAC,KAAK,KAAK;AAAA,OACxB;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAKD,SAAS;AACP,WAAK,MAAM,QAAQ,KAAK,IAAI;AAAA,IAC7B;AAAA;AAAA;AAAA;AAAA,IAKD,UAAU;AACR,WAAK,MAAM,SAAS,KAAK,IAAI;AAAA,IAC/B;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/MA,GAAG,gBAAgB,SAAS;"}