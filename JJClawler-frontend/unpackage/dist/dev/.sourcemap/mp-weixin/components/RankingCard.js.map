{"version":3,"file":"RankingCard.js","sources":["components/RankingCard.vue","/Users/guliyu/weixin-miniapp/JJClawler-frontend/JJClawler-frontend/components/RankingCard.vue?type=component"],"sourcesContent":["<template>\n  <view class=\"ranking-card\" :class=\"{ 'clickable': clickable }\" @tap=\"onClick\">\n    <view class=\"ranking-header\">\n      <view class=\"ranking-info\">\n        <text class=\"ranking-title\">{{ ranking.name || ranking.title }}</text>\n        <text class=\"ranking-desc\" v-if=\"ranking.description\">{{ ranking.description }}</text>\n      </view>\n      <view class=\"ranking-badge\" v-if=\"ranking.isHot\">\n        <text class=\"badge-text\">热门</text>\n      </view>\n    </view>\n    \n    <view class=\"ranking-stats\">\n      <view class=\"stat-item\">\n        <text class=\"stat-label\">书籍数量</text>\n        <text class=\"stat-value\">{{ formatNumber(ranking.bookCount || 0) }}</text>\n      </view>\n      <view class=\"stat-item\">\n        <text class=\"stat-label\">更新时间</text>\n        <text class=\"stat-value\">{{ formatTime(ranking.updateTime) }}</text>\n      </view>\n      <view class=\"stat-item\" v-if=\"ranking.viewCount\">\n        <text class=\"stat-label\">浏览量</text>\n        <text class=\"stat-value\">{{ formatNumber(ranking.viewCount) }}</text>\n      </view>\n    </view>\n    \n    <view class=\"ranking-footer\" v-if=\"showPreview && ranking.topBooks\">\n      <text class=\"preview-label\">热门书籍预览：</text>\n      <view class=\"book-preview\">\n        <text \n          class=\"book-name\" \n          v-for=\"(book, index) in ranking.topBooks.slice(0, 3)\" \n          :key=\"book.id || index\"\n        >\n          {{ book.name || book.title }}\n        </text>\n      </view>\n    </view>\n    \n    <view class=\"ranking-actions\" v-if=\"showActions\">\n      <view class=\"action-btn follow-btn\" @tap.stop=\"onFollow\">\n        <text class=\"btn-text\">{{ ranking.isFollowed ? '已关注' : '关注' }}</text>\n      </view>\n      <view class=\"action-btn share-btn\" @tap.stop=\"onShare\">\n        <text class=\"btn-text\">分享</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\n/**\n * 榜单卡片组件\n * @description 用于展示榜单信息的卡片组件，支持统计数据、预览、操作等\n * @property {Object} ranking 榜单数据对象\n * @property {Boolean} clickable 是否可点击\n * @property {Boolean} showPreview 是否显示书籍预览\n * @property {Boolean} showActions 是否显示操作按钮\n * @event {Function} click 点击事件\n * @event {Function} follow 关注事件\n * @event {Function} share 分享事件\n */\nexport default {\n  name: 'RankingCard',\n  props: {\n    ranking: {\n      type: Object,\n      required: true,\n      default: () => ({})\n    },\n    clickable: {\n      type: Boolean,\n      default: true\n    },\n    showPreview: {\n      type: Boolean,\n      default: true\n    },\n    showActions: {\n      type: Boolean,\n      default: false\n    }\n  },\n  \n  methods: {\n    /**\n     * 格式化数字显示\n     */\n    formatNumber(num) {\n      if (typeof num !== 'number') return num || '0'\n      \n      if (num >= 10000) {\n        return (num / 10000).toFixed(1) + '万'\n      } else if (num >= 1000) {\n        return (num / 1000).toFixed(1) + 'k'\n      }\n      \n      return num.toString()\n    },\n    \n    /**\n     * 格式化时间显示\n     */\n    formatTime(time) {\n      if (!time) return '未知'\n      \n      const now = new Date()\n      const updateTime = new Date(time)\n      const diff = now - updateTime\n      \n      const minutes = Math.floor(diff / (1000 * 60))\n      const hours = Math.floor(diff / (1000 * 60 * 60))\n      const days = Math.floor(diff / (1000 * 60 * 60 * 24))\n      \n      if (minutes < 60) {\n        return `${minutes}分钟前`\n      } else if (hours < 24) {\n        return `${hours}小时前`\n      } else if (days < 7) {\n        return `${days}天前`\n      } else {\n        return updateTime.toLocaleDateString()\n      }\n    },\n    \n    /**\n     * 点击卡片事件\n     */\n    onClick() {\n      if (this.clickable) {\n        this.$emit('click', this.ranking)\n      }\n    },\n    \n    /**\n     * 关注/取消关注\n     */\n    onFollow() {\n      this.$emit('follow', {\n        ranking: this.ranking,\n        isFollowed: !this.ranking.isFollowed\n      })\n    },\n    \n    /**\n     * 分享榜单\n     */\n    onShare() {\n      this.$emit('share', this.ranking)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.ranking-card {\n  @include card-style;\n  padding: $spacing-lg;\n  margin-bottom: $spacing-sm;\n  transition: all 0.3s ease;\n  \n  &.clickable {\n    cursor: pointer;\n    \n    &:hover {\n      transform: translateY(-2rpx);\n      box-shadow: $shadow-dark;\n    }\n    \n    &:active {\n      transform: translateY(0);\n    }\n  }\n}\n\n.ranking-header {\n  @include flex-between;\n  align-items: flex-start;\n  margin-bottom: $spacing-md;\n}\n\n.ranking-info {\n  flex: 1;\n  \n  .ranking-title {\n    display: block;\n    font-size: $font-size-lg;\n    font-weight: bold;\n    color: $text-primary;\n    margin-bottom: $spacing-xs;\n    @include text-ellipsis;\n  }\n  \n  .ranking-desc {\n    font-size: $font-size-sm;\n    color: $text-secondary;\n    line-height: 1.4;\n    @include text-ellipsis-multiline(2);\n  }\n}\n\n.ranking-badge {\n  flex-shrink: 0;\n  margin-left: $spacing-sm;\n  \n  .badge-text {\n    display: inline-block;\n    padding: 4rpx 12rpx;\n    background-color: $accent-color;\n    color: white;\n    font-size: $font-size-xs;\n    border-radius: $border-radius-small;\n  }\n}\n\n.ranking-stats {\n  @include flex-between;\n  padding: $spacing-sm 0;\n  border-top: 2rpx solid $border-light;\n  border-bottom: 2rpx solid $border-light;\n  margin-bottom: $spacing-sm;\n  \n  .stat-item {\n    @include flex-column-center;\n    flex: 1;\n    \n    .stat-label {\n      font-size: $font-size-xs;\n      color: $text-placeholder;\n      margin-bottom: 4rpx;\n    }\n    \n    .stat-value {\n      font-size: $font-size-md;\n      font-weight: bold;\n      color: $primary-color;\n    }\n  }\n}\n\n.ranking-footer {\n  margin-bottom: $spacing-sm;\n  \n  .preview-label {\n    font-size: $font-size-sm;\n    color: $text-secondary;\n    margin-bottom: $spacing-xs;\n  }\n  \n  .book-preview {\n    @include flex-center;\n    flex-wrap: wrap;\n    gap: $spacing-xs;\n    \n    .book-name {\n      padding: 4rpx 12rpx;\n      background-color: $background-color;\n      color: $text-primary;\n      font-size: $font-size-xs;\n      border-radius: $border-radius-small;\n      @include text-ellipsis;\n      max-width: 200rpx;\n    }\n  }\n}\n\n.ranking-actions {\n  @include flex-center;\n  gap: $spacing-sm;\n  \n  .action-btn {\n    @include flex-center;\n    padding: $spacing-xs $spacing-md;\n    border-radius: $border-radius-medium;\n    transition: all 0.3s ease;\n    \n    .btn-text {\n      font-size: $font-size-sm;\n    }\n    \n    &:active {\n      opacity: 0.7;\n    }\n  }\n  \n  .follow-btn {\n    background-color: $primary-color;\n    color: white;\n    \n    .btn-text {\n      color: white;\n    }\n  }\n  \n  .share-btn {\n    background-color: transparent;\n    border: 2rpx solid $border-medium;\n    \n    .btn-text {\n      color: $text-secondary;\n    }\n  }\n}\n\n// 关注状态样式\n.ranking-card .follow-btn.followed {\n  background-color: $text-placeholder;\n  \n  .btn-text {\n    color: white;\n  }\n}\n</style> ","import Component from '/Users/guliyu/weixin-miniapp/JJClawler-frontend/JJClawler-frontend/components/RankingCard.vue'\nwx.createComponent(Component)"],"names":[],"mappings":";;AA+DA,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,OAAO;AAAA,IACL,SAAS;AAAA,MACP,MAAM;AAAA,MACN,UAAU;AAAA,MACV,SAAS,OAAO,CAAA;AAAA,IACjB;AAAA,IACD,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,EACD;AAAA,EAED,SAAS;AAAA;AAAA;AAAA;AAAA,IAIP,aAAa,KAAK;AAChB,UAAI,OAAO,QAAQ;AAAU,eAAO,OAAO;AAE3C,UAAI,OAAO,KAAO;AAChB,gBAAQ,MAAM,KAAO,QAAQ,CAAC,IAAI;AAAA,MACpC,WAAW,OAAO,KAAM;AACtB,gBAAQ,MAAM,KAAM,QAAQ,CAAC,IAAI;AAAA,MACnC;AAEA,aAAO,IAAI,SAAS;AAAA,IACrB;AAAA;AAAA;AAAA;AAAA,IAKD,WAAW,MAAM;AACf,UAAI,CAAC;AAAM,eAAO;AAElB,YAAM,MAAM,oBAAI,KAAK;AACrB,YAAM,aAAa,IAAI,KAAK,IAAI;AAChC,YAAM,OAAO,MAAM;AAEnB,YAAM,UAAU,KAAK,MAAM,QAAQ,MAAO,GAAG;AAC7C,YAAM,QAAQ,KAAK,MAAM,QAAQ,MAAO,KAAK,GAAG;AAChD,YAAM,OAAO,KAAK,MAAM,QAAQ,MAAO,KAAK,KAAK,GAAG;AAEpD,UAAI,UAAU,IAAI;AAChB,eAAO,GAAG,OAAO;AAAA,MACnB,WAAW,QAAQ,IAAI;AACrB,eAAO,GAAG,KAAK;AAAA,MACjB,WAAW,OAAO,GAAG;AACnB,eAAO,GAAG,IAAI;AAAA,aACT;AACL,eAAO,WAAW,mBAAmB;AAAA,MACvC;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,UAAU;AACR,UAAI,KAAK,WAAW;AAClB,aAAK,MAAM,SAAS,KAAK,OAAO;AAAA,MAClC;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,WAAW;AACT,WAAK,MAAM,UAAU;AAAA,QACnB,SAAS,KAAK;AAAA,QACd,YAAY,CAAC,KAAK,QAAQ;AAAA,OAC3B;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAKD,UAAU;AACR,WAAK,MAAM,SAAS,KAAK,OAAO;AAAA,IAClC;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvJA,GAAG,gBAAgB,SAAS;"}